Traceback (most recent call last):
  File "/Users/eatai/.pyenv/versions/3.13.1/envs/datascience/lib/python3.13/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
    ~~~~~~~~~^
        nb,
        ^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "/Users/eatai/.pyenv/versions/3.13.1/envs/datascience/lib/python3.13/site-packages/nbclient/client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/eatai/.pyenv/versions/3.13.1/envs/datascience/lib/python3.13/site-packages/jupyter_core/utils/__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/eatai/.pyenv/versions/3.13.1/lib/python3.13/asyncio/base_events.py", line 720, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/eatai/.pyenv/versions/3.13.1/envs/datascience/lib/python3.13/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
        cell, index, execution_count=self.code_cells_executed + 1
    )
  File "/Users/eatai/.pyenv/versions/3.13.1/envs/datascience/lib/python3.13/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/Users/eatai/.pyenv/versions/3.13.1/envs/datascience/lib/python3.13/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# Student requested making the opacity of the markers indicate magnitude.
# alpha (opacity) takes a value from 0-1 (transparent - opaque).
# To scale an array so the values are in the 0-1 range, subtract off the minimum and divide by (max - min)
mag_01 = (eq['mag'] - eq['mag'].min())/(eq['mag'].max()-eq['mag'].min())

fig, ax = plt.subplots(1,1, figsize = (5,3))
sc = ax.scatter(eq['longitude'], eq['latitude'],
                s = 10, 
                c = eq['mag'], alpha = mag, cmap = 'YlOrRd'
                )

fig.colorbar(sc)
plt.show()
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mNameError[0m                                 Traceback (most recent call last)
Cell [0;32mIn[11], line 9[0m
[1;32m      4[0m mag_01 [38;5;241m=[39m (eq[[38;5;124m'[39m[38;5;124mmag[39m[38;5;124m'[39m] [38;5;241m-[39m eq[[38;5;124m'[39m[38;5;124mmag[39m[38;5;124m'[39m][38;5;241m.[39mmin())[38;5;241m/[39m(eq[[38;5;124m'[39m[38;5;124mmag[39m[38;5;124m'[39m][38;5;241m.[39mmax()[38;5;241m-[39meq[[38;5;124m'[39m[38;5;124mmag[39m[38;5;124m'[39m][38;5;241m.[39mmin())
[1;32m      6[0m fig, ax [38;5;241m=[39m plt[38;5;241m.[39msubplots([38;5;241m1[39m,[38;5;241m1[39m, figsize [38;5;241m=[39m ([38;5;241m5[39m,[38;5;241m3[39m))
[1;32m      7[0m sc [38;5;241m=[39m ax[38;5;241m.[39mscatter(eq[[38;5;124m'[39m[38;5;124mlongitude[39m[38;5;124m'[39m], eq[[38;5;124m'[39m[38;5;124mlatitude[39m[38;5;124m'[39m],
[1;32m      8[0m                 s [38;5;241m=[39m [38;5;241m10[39m, 
[0;32m----> 9[0m                 c [38;5;241m=[39m eq[[38;5;124m'[39m[38;5;124mmag[39m[38;5;124m'[39m], alpha [38;5;241m=[39m [43mmag[49m, cmap [38;5;241m=[39m [38;5;124m'[39m[38;5;124mYlOrRd[39m[38;5;124m'[39m
[1;32m     10[0m                 )
[1;32m     12[0m fig[38;5;241m.[39mcolorbar(sc)
[1;32m     13[0m plt[38;5;241m.[39mshow()

[0;31mNameError[0m: name 'mag' is not defined

